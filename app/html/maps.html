<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
	<link rel="stylesheet" href="assets/css/reset.css">
	<link rel="stylesheet" href="assets/css/maps.css">
	<title>Maps</title>
</head>
<body>
	<div id="content">
		<header>
			<h1>Les 3 villes qui correspondent le plus à vos critères</h1>
			<div id="logos-container">
				<div id="logo-sound"></div>
				<div id="logo-iau"></div>
			</div>
			<h2>New York, Istanbul, Buenos Aires</h2>
		</header>
		<section>
			<h3>Cliquez sur une ville pour découvrir son profil</h3>
			<div id="map"></div>
		</section>
		<footer>
		</footer>
	</div>
	<script>
		window.onload = function(){

			var mapColor = '#ffffff';
			var height = 380;
			var width = 690;
			var map = 'custom.geo.json';

			function CalculateStarPoints(centerX, centerY, arms, outerRadius, innerRadius)
				{
				   var results = "";

				   var angle = Math.PI / arms;

				   for (var i = 0; i < 2 * arms; i++)
				   {
				      // Use outer or inner radius depending on what iteration we are in.
				      var r = (i & 1) == 0 ? outerRadius : innerRadius;
				      
				      var currX = centerX + Math.cos((i-0.5) * angle) * r;
				      var currY = centerY + Math.sin((i-0.5) * angle) * r;

				      // Our first time we simply append the coordinates, subsequet times
				      // we append a ", " to distinguish each coordinate pair.
				      if (i == 0)
				      {
				         results = currX + "," + currY;
				      }
				      else
				      {
				         results += ", " + currX + "," + currY;
				      }
				   }

				   return results;
				}
			
			






			var canvas = d3.select('#map')
				.append("svg")
				.attr("width", width)
				.attr("height", height);
			
			var center = d3.geo.centroid(map);

			// var scale = d3.scale.linear().domain([0, 380]).range([2000]);
			// var rescale = 150*690/2000;

			d3.json('custom.geo.json', function(data) {
				var group = canvas.selectAll("g")
					.data(data.features)
					.enter()
					.append("g");

				var projection = d3.geo.mercator().scale(110).translate([690/2, 380/2])
	            .center([0, 0]);

				var path = d3.geo.path().projection(projection);

				var areas = group.append("path")
					.attr('d', path)
					.attr('class', "area")
					.attr('fill', mapColor);

				var star = canvas.append("svg:polygon")
					.attr("id", "star_1")
					.attr('fill', '#ee2722')
					.attr("visibility", "visible")
					.attr("points", CalculateStarPoints(60, 20, 5, 10, 5));

			});
		};
	</script>
</body>
</html>